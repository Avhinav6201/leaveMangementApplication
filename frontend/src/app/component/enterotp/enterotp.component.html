<!-- OTP Form -->
<form [formGroup]="otpForm" (ngSubmit)="onVerifyOtp()" *ngIf="!isOtpVerified">
  <div class="form-container">
    <button (click)="closeDialog()" class="close-button" aria-label="Close">
      <mat-icon>close</mat-icon>
    </button>

    <div class="form-group">
      <label for="otp">OTP:</label>
      <input
        type="text"
        id="otp"
        class="form-control"
        formControlName="otp"
        placeholder="Enter 6-digit OTP"
      />
      <div *ngIf="otpForm.controls['otp'].touched && otpForm.controls['otp'].invalid" class="error-messages">
        <span *ngIf="otpForm.controls['otp'].hasError('required')">OTP is required.</span>
        <span *ngIf="otpForm.controls['otp'].hasError('pattern')">Enter a valid 6-digit OTP.</span>
      </div>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="otpForm.invalid">Verify OTP</button>
  </div>
</form>

<!-- Reset Password Form -->
<form [formGroup]="resetPasswordForm" (ngSubmit)="onResetPassword()" *ngIf="isOtpVerified">
  <div class="form-container">
    <button (click)="closeDialog()" class="close-button" aria-label="Close"><mat-icon>close</mat-icon></button>



    <div class="form-group">
      <label for="newPassword">New Password:</label>
      <input
        type="password"
        id="newPassword"
        class="form-control"
        formControlName="newPassword"
        placeholder="Enter new password"
      />
      <div *ngIf="resetPasswordForm.controls['newPassword'].touched && resetPasswordForm.controls['newPassword'].invalid" class="error-messages">
        <span *ngIf="resetPasswordForm.controls['newPassword'].hasError('required')">New Password is required.</span>
        <span *ngIf="resetPasswordForm.controls['newPassword'].hasError('minlength')">Password must be at least 6 characters long.</span>
      </div>
    </div>

    <div class="form-group">
      <label for="confirmNewPassword">Confirm New Password:</label>
      <input
        type="password"
        id="confirmNewPassword"
        class="form-control"
        formControlName="confirmNewPassword"
        placeholder="Confirm new password"
      />
      <div *ngIf="resetPasswordForm.controls['confirmNewPassword'].touched && resetPasswordForm.controls['confirmNewPassword'].invalid" class="error-messages">
        <span *ngIf="resetPasswordForm.controls['confirmNewPassword'].hasError('required')">Confirm Password is required.</span>
        <span *ngIf="resetPasswordForm.hasError('mismatch') && resetPasswordForm.controls['confirmNewPassword'].touched">Passwords do not match.</span>
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="resetPasswordForm.invalid">Reset Password</button>
  </div>
</form>

